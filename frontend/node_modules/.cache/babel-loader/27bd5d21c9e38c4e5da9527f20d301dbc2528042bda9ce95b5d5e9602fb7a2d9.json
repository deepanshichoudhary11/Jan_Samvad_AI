{"ast":null,"code":"import React,{useState,useRef}from'react';import{complaintAPI,aiAPI}from'../services/api';import'./FileComplaint.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FileComplaint=_ref=>{let{user}=_ref;const[formData,setFormData]=useState({address:{houseNo:'',addressLine1:'',addressLine2:'',pinCode:''},issueDescription:'',category:'',categoryOther:'',region:'',regionOther:''});const[voiceInput,setVoiceInput]=useState('');const[isRecording,setIsRecording]=useState(false);const[voiceLanguage,setVoiceLanguage]=useState(()=>{// Auto-detect language based on browser settings\nconst browserLang=navigator.language||navigator.userLanguage;if(browserLang.startsWith('hi'))return'hi-IN';if(browserLang.startsWith('en'))return'en-IN';if(browserLang.startsWith('gu'))return'gu-IN';if(browserLang.startsWith('bn'))return'bn-IN';if(browserLang.startsWith('ta'))return'ta-IN';if(browserLang.startsWith('te'))return'te-IN';if(browserLang.startsWith('mr'))return'mr-IN';if(browserLang.startsWith('pa'))return'pa-IN';if(browserLang.startsWith('kn'))return'kn-IN';return'hi-IN';// Default to Hindi\n});const[selectedImages,setSelectedImages]=useState([]);const[aiDraft,setAiDraft]=useState(null);const[isGeneratingDraft,setIsGeneratingDraft]=useState(false);const[isSubmitting,setIsSubmitting]=useState(false);const[reviewConfirmed,setReviewConfirmed]=useState(false);const[success,setSuccess]=useState(null);const[error,setError]=useState('');const[isEditingDraft,setIsEditingDraft]=useState(false);const[editedDraft,setEditedDraft]=useState('');const[editedAuthorityEmail,setEditedAuthorityEmail]=useState('');const fileInputRef=useRef(null);const recognitionRef=useRef(null);// Check browser compatibility\nconst isSpeechRecognitionSupported=()=>{return!!(window.SpeechRecognition||window.webkitSpeechRecognition);};// Initialize speech recognition\nconst initializeSpeechRecognition=()=>{if(!recognitionRef.current){const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;console.log('Speech Recognition available:',!!SpeechRecognition);if(SpeechRecognition){recognitionRef.current=new SpeechRecognition();recognitionRef.current.continuous=true;recognitionRef.current.interimResults=true;// Set language based on user selection\nconst languageCode=voiceLanguage==='hi-IN-haryanvi'?'hi-IN':voiceLanguage;recognitionRef.current.lang=languageCode;console.log('Setting language to:',languageCode);recognitionRef.current.onresult=event=>{console.log('Speech recognition result:',event);let finalTranscript='';for(let i=event.resultIndex;i<event.results.length;i++){if(event.results[i].isFinal){finalTranscript+=event.results[i][0].transcript;}}if(finalTranscript){console.log('Final transcript:',finalTranscript);setVoiceInput(finalTranscript);setFormData(prev=>({...prev,issueDescription:prev.issueDescription+' '+finalTranscript}));}};recognitionRef.current.onerror=event=>{console.error('Speech recognition error:',event.error);setError(`Voice recognition failed: ${event.error}. Please try again.`);setIsRecording(false);};recognitionRef.current.onend=()=>{console.log('Speech recognition ended');setIsRecording(false);};recognitionRef.current.onstart=()=>{console.log('Speech recognition started');};}else{console.log('Speech recognition not supported');setError('Speech recognition is not supported in this browser.');}}else{// Update language if recognition already exists\nconst languageCode=voiceLanguage==='hi-IN-haryanvi'?'hi-IN':voiceLanguage;recognitionRef.current.lang=languageCode;console.log('Updated language to:',languageCode);}};const categories=['Sanitation','Water','Electricity','Roads','Street Lights','Sewage','Garbage','Traffic','Other'];const regions=['Maharashtra','Uttar Pradesh','Delhi','Karnataka','Tamil Nadu','Gujarat','West Bengal','Andhra Pradesh','Telangana','Kerala','Other'];const handleInputChange=e=>{const{name,value}=e.target;if(name.includes('.')){const[parent,child]=name.split('.');setFormData(prev=>({...prev,[parent]:{...prev[parent],[child]:value}}));}else{setFormData(prev=>({...prev,[name]:value}));}};const handleVoiceRecording=async()=>{if(isRecording){// Stop recording\nif(recognitionRef.current){recognitionRef.current.stop();}setIsRecording(false);}else{// Start recording\ntry{// Check microphone permission first\nif(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){try{await navigator.mediaDevices.getUserMedia({audio:true});}catch(permissionError){setError('Microphone permission denied. Please allow microphone access and try again.');return;}}initializeSpeechRecognition();if(recognitionRef.current){// Clear any previous error\nsetError('');setVoiceInput('');// Start recording\nrecognitionRef.current.start();setIsRecording(true);console.log('Started voice recording with language:',voiceLanguage);}else{// Fallback to simulated transcription\nsetError('Speech recognition not available. Using simulated transcription.');setIsRecording(true);setTimeout(async()=>{try{const result=await aiAPI.transcribeAudio();setVoiceInput(result.text);setFormData(prev=>({...prev,issueDescription:prev.issueDescription+' '+result.text}));}catch(error){setError('Voice transcription failed. Please try again.');}finally{setIsRecording(false);}},3000);}}catch(error){console.error('Error starting speech recognition:',error);setError(`Failed to start voice recording: ${error.message}. Please try again.`);setIsRecording(false);}}};const handleImageUpload=e=>{const files=Array.from(e.target.files);const newImages=files.map(file=>({file,preview:URL.createObjectURL(file),analysis:null}));setSelectedImages(prev=>[...prev,...newImages]);// Simulate image analysis\nfiles.forEach((file,index)=>{setTimeout(async()=>{try{const analysis=await aiAPI.analyzeImage(file);setSelectedImages(prev=>prev.map((img,i)=>i===prev.length-files.length+index?{...img,analysis}:img));}catch(error){console.error('Image analysis failed:',error);}},1000+index*500);});};const removeImage=index=>{setSelectedImages(prev=>{const newImages=prev.filter((_,i)=>i!==index);return newImages;});};const generateDraft=async()=>{if(!formData.category||!formData.issueDescription){setError('Please fill in category and issue description first.');return;}setIsGeneratingDraft(true);setError('');try{const draft=await aiAPI.generateComplaintDraft({userInfo:user,address:formData.address,issueDescription:formData.issueDescription,category:formData.category,region:formData.region});setAiDraft(draft);setEditedDraft(draft.draft);setEditedAuthorityEmail(draft.authority.email);setIsEditingDraft(false);}catch(error){setError('Failed to generate complaint draft. Please try again.');}finally{setIsGeneratingDraft(false);}};const handleEditDraft=()=>{setIsEditingDraft(true);setEditedDraft(aiDraft.draft);setEditedAuthorityEmail(aiDraft.authority.email);};const handleSaveDraft=()=>{setAiDraft(prev=>({...prev,draft:editedDraft,authority:{...prev.authority,email:editedAuthorityEmail}}));setIsEditingDraft(false);};const handleCancelEdit=()=>{setIsEditingDraft(false);setEditedDraft(aiDraft.draft);setEditedAuthorityEmail(aiDraft.authority.email);};const handleSubmit=async e=>{e.preventDefault();if(!reviewConfirmed){setError('Please review and confirm the complaint details.');return;}setIsSubmitting(true);setError('');try{var _aiDraft$authority,_aiDraft$authority2;const complaintData={userId:user.id,userInfo:user,...formData};// Add AI draft if available\nif(aiDraft){complaintData.aiDraft=aiDraft;}// Add edited authority email if draft was edited and email was changed\nconsole.log('DEBUG: aiDraft exists:',!!aiDraft);console.log('DEBUG: editedAuthorityEmail:',editedAuthorityEmail);console.log('DEBUG: aiDraft.authority.email:',aiDraft===null||aiDraft===void 0?void 0:(_aiDraft$authority=aiDraft.authority)===null||_aiDraft$authority===void 0?void 0:_aiDraft$authority.email);// Use the current aiDraft authority email (which gets updated when saved)\nconst currentAuthorityEmail=aiDraft===null||aiDraft===void 0?void 0:(_aiDraft$authority2=aiDraft.authority)===null||_aiDraft$authority2===void 0?void 0:_aiDraft$authority2.email;console.log('DEBUG: currentAuthorityEmail:',currentAuthorityEmail);console.log('DEBUG: emails are different:',editedAuthorityEmail!==currentAuthorityEmail);// Check if the current email is different from the auto-generated one\nconst autoGeneratedEmail=`${formData.category.toLowerCase().replace(' ','.')}@examplecity.gov.in`;console.log('DEBUG: autoGeneratedEmail:',autoGeneratedEmail);if(aiDraft&&currentAuthorityEmail&&currentAuthorityEmail!==autoGeneratedEmail){complaintData.editedAuthorityEmail=currentAuthorityEmail;console.log('✅ Sending edited authority email:',currentAuthorityEmail);}else{console.log('❌ NOT sending edited authority email. Using default.');}console.log('DEBUG: Final complaintData being sent:',complaintData);const response=await complaintAPI.fileComplaint(complaintData);setSuccess(response);// Reset form\nsetFormData({address:{houseNo:'',addressLine1:'',addressLine2:'',pinCode:''},issueDescription:'',category:'',region:''});setVoiceInput('');setSelectedImages([]);setAiDraft(null);setReviewConfirmed(false);}catch(error){setError(error.message||'Failed to submit complaint. Please try again.');}finally{setIsSubmitting(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"File a Complaint\"}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"Report civic issues with AI-powered assistance\"})]}),success&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Complaint Submitted Successfully!\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Your tracking ID is: \",/*#__PURE__*/_jsx(\"strong\",{children:success.trackingId})]}),success.emailStatus&&/*#__PURE__*/_jsxs(\"div\",{className:\"email-status\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Email Status:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"email-status-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Authority Email:\"}),success.emailStatus.authority.success?/*#__PURE__*/_jsxs(\"span\",{className:\"success\",children:[\"\\u2705 Sent to \",success.complaint.authority.email]}):/*#__PURE__*/_jsxs(\"span\",{className:\"error\",children:[\"\\u274C Failed: \",success.emailStatus.authority.message]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"email-status-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Confirmation Email:\"}),success.emailStatus.user.success?/*#__PURE__*/_jsxs(\"span\",{className:\"success\",children:[\"\\u2705 Sent to \",user.email]}):/*#__PURE__*/_jsxs(\"span\",{className:\"error\",children:[\"\\u274C Failed: \",success.emailStatus.user.message]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setSuccess(null),children:\"File Another Complaint\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-error\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"complaint-form-container animate-fade-in\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"complaint-form animate-slide-in-left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"section-title\",children:\"Address Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"address-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"houseNo\",className:\"form-label\",children:\"House No.\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"houseNo\",name:\"address.houseNo\",value:formData.address.houseNo,onChange:handleInputChange,className:\"form-input\",placeholder:\"Enter house number\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"addressLine1\",className:\"form-label\",children:\"Address Line 1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"addressLine1\",name:\"address.addressLine1\",value:formData.address.addressLine1,onChange:handleInputChange,className:\"form-input\",placeholder:\"Street address\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"addressLine2\",className:\"form-label\",children:\"Address Line 2\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"addressLine2\",name:\"address.addressLine2\",value:formData.address.addressLine2,onChange:handleInputChange,className:\"form-input\",placeholder:\"Landmark or area\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pinCode\",className:\"form-label\",children:\"PIN Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"pinCode\",name:\"address.pinCode\",value:formData.address.pinCode,onChange:handleInputChange,className:\"form-input\",placeholder:\"6-digit PIN code\",required:true})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"section-title\",children:\"Issue Description\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"issueDescription\",className:\"form-label\",children:\"Describe the issue (Text)\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"issueDescription\",name:\"issueDescription\",value:formData.issueDescription,onChange:handleInputChange,className:\"form-input\",rows:\"4\",placeholder:\"Describe the civic issue in detail...\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"voice-input-section\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Voice Input\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"voice-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"voice-language-selector\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"voiceLanguage\",className:\"form-label\",children:\"Language:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"voiceLanguage\",value:voiceLanguage,onChange:e=>setVoiceLanguage(e.target.value),className:\"form-select\",disabled:isRecording,children:[/*#__PURE__*/_jsx(\"option\",{value:\"hi-IN\",children:\"Hindi (\\u0939\\u093F\\u0902\\u0926\\u0940)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"en-IN\",children:\"English (India)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"en-US\",children:\"English (US)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"gu-IN\",children:\"Gujarati (\\u0A97\\u0AC1\\u0A9C\\u0AB0\\u0ABE\\u0AA4\\u0AC0)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bn-IN\",children:\"Bengali (\\u09AC\\u09BE\\u0982\\u09B2\\u09BE)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ta-IN\",children:\"Tamil (\\u0BA4\\u0BAE\\u0BBF\\u0BB4\\u0BCD)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"te-IN\",children:\"Telugu (\\u0C24\\u0C46\\u0C32\\u0C41\\u0C17\\u0C41)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mr-IN\",children:\"Marathi (\\u092E\\u0930\\u093E\\u0920\\u0940)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pa-IN\",children:\"Punjabi (\\u0A2A\\u0A70\\u0A1C\\u0A3E\\u0A2C\\u0A40)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kn-IN\",children:\"Kannada (\\u0C95\\u0CA8\\u0CCD\\u0CA8\\u0CA1)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hi-IN-haryanvi\",children:\"Haryanvi (\\u0939\\u0930\\u093F\\u092F\\u093E\\u0923\\u0935\\u0940)\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:`btn ${isRecording?'btn-danger':'btn-secondary'}`,onClick:handleVoiceRecording,children:isRecording?'🛑 Stop Recording':'🎤 Start Recording'}),isRecording&&/*#__PURE__*/_jsxs(\"div\",{className:\"recording-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"recording-dot\"}),\"Recording... Speak clearly in \",voiceLanguage==='hi-IN'?'Hindi':voiceLanguage==='en-IN'||voiceLanguage==='en-US'?'English':voiceLanguage==='gu-IN'?'Gujarati':voiceLanguage==='bn-IN'?'Bengali':voiceLanguage==='ta-IN'?'Tamil':voiceLanguage==='te-IN'?'Telugu':voiceLanguage==='mr-IN'?'Marathi':voiceLanguage==='pa-IN'?'Punjabi':voiceLanguage==='kn-IN'?'Kannada':voiceLanguage==='hi-IN-haryanvi'?'Haryanvi':'Hindi']}),voiceInput&&/*#__PURE__*/_jsxs(\"div\",{className:\"voice-transcription\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"transcription-header\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Transcribed:\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"clear-transcription-btn\",onClick:()=>{setVoiceInput('');setFormData(prev=>({...prev,issueDescription:prev.issueDescription.replace(voiceInput,'').trim()}));},children:\"\\u2715 Clear\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"transcription-text\",children:voiceInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"voice-instructions\",children:[/*#__PURE__*/_jsx(\"small\",{children:\"\\uD83D\\uDCA1 Tip: Speak clearly in your selected language for better recognition\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{children:[\"\\uD83C\\uDF10 Browser Support: \",isSpeechRecognitionSupported()?'✅ Supported':'❌ Not Supported',\" - Chrome, Edge, Safari (HTTPS required)\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"image-upload-section\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Upload Images\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"image-upload-controls\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>fileInputRef.current.click(),children:\"\\uD83D\\uDCF7 Upload Images\"}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",multiple:true,accept:\"image/*\",onChange:handleImageUpload,style:{display:'none'}})]}),selectedImages.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"image-preview-grid\",children:selectedImages.map((image,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"image-preview-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:image.preview,alt:`Upload ${index+1}`,className:\"image-preview\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-image-btn\",onClick:()=>removeImage(index),children:\"\\u2715\"}),image.analysis&&/*#__PURE__*/_jsxs(\"div\",{className:\"image-analysis\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"AI Analysis:\"}),\" \",image.analysis.description]})]},index))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"section-title\",children:\"Additional Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"details-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",className:\"form-label\",children:\"Issue Category\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"category\",name:\"category\",value:formData.category,onChange:handleInputChange,className:\"form-select\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select category\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))]}),formData.category==='Other'&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"categoryOther\",value:formData.categoryOther,onChange:handleInputChange,className:\"form-input\",placeholder:\"Please specify the issue category\",required:true,style:{marginTop:'0.5rem'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"region\",className:\"form-label\",children:\"State/Region\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"region\",name:\"region\",value:formData.region,onChange:handleInputChange,className:\"form-select\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select state\"}),regions.map(region=>/*#__PURE__*/_jsx(\"option\",{value:region,children:region},region))]}),formData.region==='Other'&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"regionOther\",value:formData.regionOther,onChange:handleInputChange,className:\"form-input\",placeholder:\"Please specify your state/region\",required:true,style:{marginTop:'0.5rem'}})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"section-title\",children:\"AI-Powered Draft\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:`btn btn-primary ${isGeneratingDraft?'loading':''}`,onClick:generateDraft,disabled:isGeneratingDraft||!formData.category||!formData.issueDescription,children:isGeneratingDraft?'Generating Draft...':'Generate AI Draft'}),aiDraft&&/*#__PURE__*/_jsxs(\"div\",{className:\"ai-draft-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"draft-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Generated Complaint Draft:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"draft-actions\",children:!isEditingDraft?/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:handleEditDraft,children:\"\\u270F\\uFE0F Edit Draft\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"edit-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-success\",onClick:handleSaveDraft,children:\"\\uD83D\\uDCBE Save Changes\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:handleCancelEdit,children:\"\\u274C Cancel\"})]})})]}),!isEditingDraft?/*#__PURE__*/_jsx(\"div\",{className:\"draft-preview\",children:/*#__PURE__*/_jsx(\"pre\",{className:\"draft-content\",children:aiDraft.draft})}):/*#__PURE__*/_jsx(\"div\",{className:\"draft-edit\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"editedDraft\",className:\"form-label\",children:\"Edit Complaint Draft:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"editedDraft\",value:editedDraft,onChange:e=>setEditedDraft(e.target.value),className:\"form-input\",rows:\"8\",placeholder:\"Edit the complaint draft...\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"authority-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Concerned Authority:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",aiDraft.authority.name]}),!isEditingDraft?/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",aiDraft.authority.email]}):/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"editedAuthorityEmail\",className:\"form-label\",children:\"Authority Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"editedAuthorityEmail\",value:editedAuthorityEmail,onChange:e=>setEditedAuthorityEmail(e.target.value),className:\"form-input\",placeholder:\"Enter authority email\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",aiDraft.authority.phone]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"section-title\",children:\"Review & Submit\"}),/*#__PURE__*/_jsx(\"div\",{className:\"review-checkbox\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:reviewConfirmed,onChange:e=>setReviewConfirmed(e.target.checked),className:\"checkbox-input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"checkbox-text\",children:\"I have reviewed the complaint and confirm the details are correct\"})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:`btn btn-success w-full ${isSubmitting?'loading':''}`,disabled:isSubmitting||!reviewConfirmed,children:isSubmitting?'Submitting Complaint...':'Submit Complaint'})]})]})})]});};export default FileComplaint;","map":{"version":3,"names":["React","useState","useRef","complaintAPI","aiAPI","jsx","_jsx","jsxs","_jsxs","FileComplaint","_ref","user","formData","setFormData","address","houseNo","addressLine1","addressLine2","pinCode","issueDescription","category","categoryOther","region","regionOther","voiceInput","setVoiceInput","isRecording","setIsRecording","voiceLanguage","setVoiceLanguage","browserLang","navigator","language","userLanguage","startsWith","selectedImages","setSelectedImages","aiDraft","setAiDraft","isGeneratingDraft","setIsGeneratingDraft","isSubmitting","setIsSubmitting","reviewConfirmed","setReviewConfirmed","success","setSuccess","error","setError","isEditingDraft","setIsEditingDraft","editedDraft","setEditedDraft","editedAuthorityEmail","setEditedAuthorityEmail","fileInputRef","recognitionRef","isSpeechRecognitionSupported","window","SpeechRecognition","webkitSpeechRecognition","initializeSpeechRecognition","current","console","log","continuous","interimResults","languageCode","lang","onresult","event","finalTranscript","i","resultIndex","results","length","isFinal","transcript","prev","onerror","onend","onstart","categories","regions","handleInputChange","e","name","value","target","includes","parent","child","split","handleVoiceRecording","stop","mediaDevices","getUserMedia","audio","permissionError","start","setTimeout","result","transcribeAudio","text","message","handleImageUpload","files","Array","from","newImages","map","file","preview","URL","createObjectURL","analysis","forEach","index","analyzeImage","img","removeImage","filter","_","generateDraft","draft","generateComplaintDraft","userInfo","authority","email","handleEditDraft","handleSaveDraft","handleCancelEdit","handleSubmit","preventDefault","_aiDraft$authority","_aiDraft$authority2","complaintData","userId","id","currentAuthorityEmail","autoGeneratedEmail","toLowerCase","replace","response","fileComplaint","className","children","trackingId","emailStatus","complaint","onClick","onSubmit","htmlFor","type","onChange","placeholder","required","rows","disabled","trim","click","ref","multiple","accept","style","display","image","src","alt","description","marginTop","phone","checked"],"sources":["C:/Users/ASUS/OneDrive/Desktop/janai/frontend/src/pages/FileComplaint.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport { complaintAPI, aiAPI } from '../services/api';\r\nimport './FileComplaint.css';\r\n\r\nconst FileComplaint = ({ user }) => {\r\n  const [formData, setFormData] = useState({\r\n    address: {\r\n      houseNo: '',\r\n      addressLine1: '',\r\n      addressLine2: '',\r\n      pinCode: ''\r\n    },\r\n    issueDescription: '',\r\n    category: '',\r\n    categoryOther: '',\r\n    region: '',\r\n    regionOther: ''\r\n  });\r\n  \r\n  const [voiceInput, setVoiceInput] = useState('');\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [voiceLanguage, setVoiceLanguage] = useState(() => {\r\n    // Auto-detect language based on browser settings\r\n    const browserLang = navigator.language || navigator.userLanguage;\r\n    if (browserLang.startsWith('hi')) return 'hi-IN';\r\n    if (browserLang.startsWith('en')) return 'en-IN';\r\n    if (browserLang.startsWith('gu')) return 'gu-IN';\r\n    if (browserLang.startsWith('bn')) return 'bn-IN';\r\n    if (browserLang.startsWith('ta')) return 'ta-IN';\r\n    if (browserLang.startsWith('te')) return 'te-IN';\r\n    if (browserLang.startsWith('mr')) return 'mr-IN';\r\n    if (browserLang.startsWith('pa')) return 'pa-IN';\r\n    if (browserLang.startsWith('kn')) return 'kn-IN';\r\n    return 'hi-IN'; // Default to Hindi\r\n  });\r\n  const [selectedImages, setSelectedImages] = useState([]);\r\n  const [aiDraft, setAiDraft] = useState(null);\r\n  const [isGeneratingDraft, setIsGeneratingDraft] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [reviewConfirmed, setReviewConfirmed] = useState(false);\r\n  const [success, setSuccess] = useState(null);\r\n  const [error, setError] = useState('');\r\n  const [isEditingDraft, setIsEditingDraft] = useState(false);\r\n  const [editedDraft, setEditedDraft] = useState('');\r\n  const [editedAuthorityEmail, setEditedAuthorityEmail] = useState('');\r\n\r\n  const fileInputRef = useRef(null);\r\n  const recognitionRef = useRef(null);\r\n\r\n  // Check browser compatibility\r\n  const isSpeechRecognitionSupported = () => {\r\n    return !!(window.SpeechRecognition || window.webkitSpeechRecognition);\r\n  };\r\n\r\n  // Initialize speech recognition\r\n  const initializeSpeechRecognition = () => {\r\n    if (!recognitionRef.current) {\r\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n      console.log('Speech Recognition available:', !!SpeechRecognition);\r\n      \r\n      if (SpeechRecognition) {\r\n        recognitionRef.current = new SpeechRecognition();\r\n        recognitionRef.current.continuous = true;\r\n        recognitionRef.current.interimResults = true;\r\n        \r\n        // Set language based on user selection\r\n        const languageCode = voiceLanguage === 'hi-IN-haryanvi' ? 'hi-IN' : voiceLanguage;\r\n        recognitionRef.current.lang = languageCode;\r\n        console.log('Setting language to:', languageCode);\r\n        \r\n        recognitionRef.current.onresult = (event) => {\r\n          console.log('Speech recognition result:', event);\r\n          let finalTranscript = '';\r\n          for (let i = event.resultIndex; i < event.results.length; i++) {\r\n            if (event.results[i].isFinal) {\r\n              finalTranscript += event.results[i][0].transcript;\r\n            }\r\n          }\r\n          if (finalTranscript) {\r\n            console.log('Final transcript:', finalTranscript);\r\n            setVoiceInput(finalTranscript);\r\n            setFormData(prev => ({\r\n              ...prev,\r\n              issueDescription: prev.issueDescription + ' ' + finalTranscript\r\n            }));\r\n          }\r\n        };\r\n\r\n        recognitionRef.current.onerror = (event) => {\r\n          console.error('Speech recognition error:', event.error);\r\n          setError(`Voice recognition failed: ${event.error}. Please try again.`);\r\n          setIsRecording(false);\r\n        };\r\n\r\n        recognitionRef.current.onend = () => {\r\n          console.log('Speech recognition ended');\r\n          setIsRecording(false);\r\n        };\r\n\r\n        recognitionRef.current.onstart = () => {\r\n          console.log('Speech recognition started');\r\n        };\r\n      } else {\r\n        console.log('Speech recognition not supported');\r\n        setError('Speech recognition is not supported in this browser.');\r\n      }\r\n    } else {\r\n      // Update language if recognition already exists\r\n      const languageCode = voiceLanguage === 'hi-IN-haryanvi' ? 'hi-IN' : voiceLanguage;\r\n      recognitionRef.current.lang = languageCode;\r\n      console.log('Updated language to:', languageCode);\r\n    }\r\n  };\r\n\r\n  const categories = [\r\n    'Sanitation',\r\n    'Water',\r\n    'Electricity',\r\n    'Roads',\r\n    'Street Lights',\r\n    'Sewage',\r\n    'Garbage',\r\n    'Traffic',\r\n    'Other'\r\n  ];\r\n\r\n  const regions = [\r\n    'Maharashtra',\r\n    'Uttar Pradesh',\r\n    'Delhi',\r\n    'Karnataka',\r\n    'Tamil Nadu',\r\n    'Gujarat',\r\n    'West Bengal',\r\n    'Andhra Pradesh',\r\n    'Telangana',\r\n    'Kerala',\r\n    'Other'\r\n  ];\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name.includes('.')) {\r\n      const [parent, child] = name.split('.');\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [parent]: {\r\n          ...prev[parent],\r\n          [child]: value\r\n        }\r\n      }));\r\n    } else {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [name]: value\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleVoiceRecording = async () => {\r\n    if (isRecording) {\r\n      // Stop recording\r\n      if (recognitionRef.current) {\r\n        recognitionRef.current.stop();\r\n      }\r\n      setIsRecording(false);\r\n    } else {\r\n      // Start recording\r\n      try {\r\n        // Check microphone permission first\r\n        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n          try {\r\n            await navigator.mediaDevices.getUserMedia({ audio: true });\r\n          } catch (permissionError) {\r\n            setError('Microphone permission denied. Please allow microphone access and try again.');\r\n            return;\r\n          }\r\n        }\r\n\r\n        initializeSpeechRecognition();\r\n        if (recognitionRef.current) {\r\n          // Clear any previous error\r\n          setError('');\r\n          setVoiceInput('');\r\n          \r\n          // Start recording\r\n          recognitionRef.current.start();\r\n          setIsRecording(true);\r\n          console.log('Started voice recording with language:', voiceLanguage);\r\n        } else {\r\n          // Fallback to simulated transcription\r\n          setError('Speech recognition not available. Using simulated transcription.');\r\n          setIsRecording(true);\r\n          setTimeout(async () => {\r\n            try {\r\n              const result = await aiAPI.transcribeAudio();\r\n              setVoiceInput(result.text);\r\n              setFormData(prev => ({\r\n                ...prev,\r\n                issueDescription: prev.issueDescription + ' ' + result.text\r\n              }));\r\n            } catch (error) {\r\n              setError('Voice transcription failed. Please try again.');\r\n            } finally {\r\n              setIsRecording(false);\r\n            }\r\n          }, 3000);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error starting speech recognition:', error);\r\n        setError(`Failed to start voice recording: ${error.message}. Please try again.`);\r\n        setIsRecording(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = (e) => {\r\n    const files = Array.from(e.target.files);\r\n    const newImages = files.map(file => ({\r\n      file,\r\n      preview: URL.createObjectURL(file),\r\n      analysis: null\r\n    }));\r\n    setSelectedImages(prev => [...prev, ...newImages]);\r\n    \r\n    // Simulate image analysis\r\n    files.forEach((file, index) => {\r\n      setTimeout(async () => {\r\n        try {\r\n          const analysis = await aiAPI.analyzeImage(file);\r\n          setSelectedImages(prev => \r\n            prev.map((img, i) => \r\n              i === prev.length - files.length + index \r\n                ? { ...img, analysis }\r\n                : img\r\n            )\r\n          );\r\n        } catch (error) {\r\n          console.error('Image analysis failed:', error);\r\n        }\r\n      }, 1000 + index * 500);\r\n    });\r\n  };\r\n\r\n  const removeImage = (index) => {\r\n    setSelectedImages(prev => {\r\n      const newImages = prev.filter((_, i) => i !== index);\r\n      return newImages;\r\n    });\r\n  };\r\n\r\n  const generateDraft = async () => {\r\n    if (!formData.category || !formData.issueDescription) {\r\n      setError('Please fill in category and issue description first.');\r\n      return;\r\n    }\r\n\r\n    setIsGeneratingDraft(true);\r\n    setError('');\r\n\r\n    try {\r\n      const draft = await aiAPI.generateComplaintDraft({\r\n        userInfo: user,\r\n        address: formData.address,\r\n        issueDescription: formData.issueDescription,\r\n        category: formData.category,\r\n        region: formData.region\r\n      });\r\n      setAiDraft(draft);\r\n      setEditedDraft(draft.draft);\r\n      setEditedAuthorityEmail(draft.authority.email);\r\n      setIsEditingDraft(false);\r\n    } catch (error) {\r\n      setError('Failed to generate complaint draft. Please try again.');\r\n    } finally {\r\n      setIsGeneratingDraft(false);\r\n    }\r\n  };\r\n\r\n  const handleEditDraft = () => {\r\n    setIsEditingDraft(true);\r\n    setEditedDraft(aiDraft.draft);\r\n    setEditedAuthorityEmail(aiDraft.authority.email);\r\n  };\r\n\r\n  const handleSaveDraft = () => {\r\n    setAiDraft(prev => ({\r\n      ...prev,\r\n      draft: editedDraft,\r\n      authority: {\r\n        ...prev.authority,\r\n        email: editedAuthorityEmail\r\n      }\r\n    }));\r\n    setIsEditingDraft(false);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setIsEditingDraft(false);\r\n    setEditedDraft(aiDraft.draft);\r\n    setEditedAuthorityEmail(aiDraft.authority.email);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!reviewConfirmed) {\r\n      setError('Please review and confirm the complaint details.');\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError('');\r\n\r\n    try {\r\n      const complaintData = {\r\n        userId: user.id,\r\n        userInfo: user,\r\n        ...formData\r\n      };\r\n      \r\n      // Add AI draft if available\r\n      if (aiDraft) {\r\n        complaintData.aiDraft = aiDraft;\r\n      }\r\n      \r\n      // Add edited authority email if draft was edited and email was changed\r\n      console.log('DEBUG: aiDraft exists:', !!aiDraft);\r\n      console.log('DEBUG: editedAuthorityEmail:', editedAuthorityEmail);\r\n      console.log('DEBUG: aiDraft.authority.email:', aiDraft?.authority?.email);\r\n      \r\n      // Use the current aiDraft authority email (which gets updated when saved)\r\n      const currentAuthorityEmail = aiDraft?.authority?.email;\r\n      console.log('DEBUG: currentAuthorityEmail:', currentAuthorityEmail);\r\n      console.log('DEBUG: emails are different:', editedAuthorityEmail !== currentAuthorityEmail);\r\n      \r\n      // Check if the current email is different from the auto-generated one\r\n      const autoGeneratedEmail = `${formData.category.toLowerCase().replace(' ', '.')}@examplecity.gov.in`;\r\n      console.log('DEBUG: autoGeneratedEmail:', autoGeneratedEmail);\r\n      \r\n      if (aiDraft && currentAuthorityEmail && currentAuthorityEmail !== autoGeneratedEmail) {\r\n        complaintData.editedAuthorityEmail = currentAuthorityEmail;\r\n        console.log('✅ Sending edited authority email:', currentAuthorityEmail);\r\n      } else {\r\n        console.log('❌ NOT sending edited authority email. Using default.');\r\n      }\r\n      \r\n      console.log('DEBUG: Final complaintData being sent:', complaintData);\r\n      const response = await complaintAPI.fileComplaint(complaintData);\r\n      setSuccess(response);\r\n      // Reset form\r\n      setFormData({\r\n        address: { houseNo: '', addressLine1: '', addressLine2: '', pinCode: '' },\r\n        issueDescription: '',\r\n        category: '',\r\n        region: ''\r\n      });\r\n      setVoiceInput('');\r\n      setSelectedImages([]);\r\n      setAiDraft(null);\r\n      setReviewConfirmed(false);\r\n    } catch (error) {\r\n      setError(error.message || 'Failed to submit complaint. Please try again.');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"page-header\">\r\n        <h1 className=\"page-title\">File a Complaint</h1>\r\n        <p className=\"page-subtitle\">Report civic issues with AI-powered assistance</p>\r\n      </div>\r\n\r\n      {success && (\r\n        <div className=\"alert alert-success\">\r\n          <h3>Complaint Submitted Successfully!</h3>\r\n          <p>Your tracking ID is: <strong>{success.trackingId}</strong></p>\r\n          \r\n          {success.emailStatus && (\r\n            <div className=\"email-status\">\r\n              <h4>Email Status:</h4>\r\n              <div className=\"email-status-item\">\r\n                <strong>Authority Email:</strong> \r\n                {success.emailStatus.authority.success ? \r\n                  <span className=\"success\">✅ Sent to {success.complaint.authority.email}</span> : \r\n                  <span className=\"error\">❌ Failed: {success.emailStatus.authority.message}</span>\r\n                }\r\n              </div>\r\n              <div className=\"email-status-item\">\r\n                <strong>Confirmation Email:</strong> \r\n                {success.emailStatus.user.success ? \r\n                  <span className=\"success\">✅ Sent to {user.email}</span> : \r\n                  <span className=\"error\">❌ Failed: {success.emailStatus.user.message}</span>\r\n                }\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          <button \r\n            className=\"btn btn-secondary\"\r\n            onClick={() => setSuccess(null)}\r\n          >\r\n            File Another Complaint\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"alert alert-error\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"complaint-form-container animate-fade-in\">\r\n        <form onSubmit={handleSubmit} className=\"complaint-form animate-slide-in-left\">\r\n          {/* Address Section */}\r\n          <div className=\"form-section\">\r\n            <h3 className=\"section-title\">Address Details</h3>\r\n            <div className=\"address-grid\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"houseNo\" className=\"form-label\">House No.</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"houseNo\"\r\n                  name=\"address.houseNo\"\r\n                  value={formData.address.houseNo}\r\n                  onChange={handleInputChange}\r\n                  className=\"form-input\"\r\n                  placeholder=\"Enter house number\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"addressLine1\" className=\"form-label\">Address Line 1</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"addressLine1\"\r\n                  name=\"address.addressLine1\"\r\n                  value={formData.address.addressLine1}\r\n                  onChange={handleInputChange}\r\n                  className=\"form-input\"\r\n                  placeholder=\"Street address\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"addressLine2\" className=\"form-label\">Address Line 2</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"addressLine2\"\r\n                  name=\"address.addressLine2\"\r\n                  value={formData.address.addressLine2}\r\n                  onChange={handleInputChange}\r\n                  className=\"form-input\"\r\n                  placeholder=\"Landmark or area\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"pinCode\" className=\"form-label\">PIN Code</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"pinCode\"\r\n                  name=\"address.pinCode\"\r\n                  value={formData.address.pinCode}\r\n                  onChange={handleInputChange}\r\n                  className=\"form-input\"\r\n                  placeholder=\"6-digit PIN code\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Issue Description Section */}\r\n          <div className=\"form-section\">\r\n            <h3 className=\"section-title\">Issue Description</h3>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"issueDescription\" className=\"form-label\">\r\n                Describe the issue (Text)\r\n              </label>\r\n              <textarea\r\n                id=\"issueDescription\"\r\n                name=\"issueDescription\"\r\n                value={formData.issueDescription}\r\n                onChange={handleInputChange}\r\n                className=\"form-input\"\r\n                rows=\"4\"\r\n                placeholder=\"Describe the civic issue in detail...\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Voice Input */}\r\n            <div className=\"voice-input-section\">\r\n              <label className=\"form-label\">Voice Input</label>\r\n              <div className=\"voice-controls\">\r\n                <div className=\"voice-language-selector\">\r\n                  <label htmlFor=\"voiceLanguage\" className=\"form-label\">Language:</label>\r\n                                     <select\r\n                     id=\"voiceLanguage\"\r\n                     value={voiceLanguage}\r\n                     onChange={(e) => setVoiceLanguage(e.target.value)}\r\n                     className=\"form-select\"\r\n                     disabled={isRecording}\r\n                   >\r\n                     <option value=\"hi-IN\">Hindi (हिंदी)</option>\r\n                     <option value=\"en-IN\">English (India)</option>\r\n                     <option value=\"en-US\">English (US)</option>\r\n                     <option value=\"gu-IN\">Gujarati (ગુજરાતી)</option>\r\n                     <option value=\"bn-IN\">Bengali (বাংলা)</option>\r\n                     <option value=\"ta-IN\">Tamil (தமிழ்)</option>\r\n                     <option value=\"te-IN\">Telugu (తెలుగు)</option>\r\n                     <option value=\"mr-IN\">Marathi (मराठी)</option>\r\n                     <option value=\"pa-IN\">Punjabi (ਪੰਜਾਬੀ)</option>\r\n                     <option value=\"kn-IN\">Kannada (ಕನ್ನಡ)</option>\r\n                     <option value=\"hi-IN-haryanvi\">Haryanvi (हरियाणवी)</option>\r\n                   </select>\r\n                </div>\r\n                <button\r\n                  type=\"button\"\r\n                  className={`btn ${isRecording ? 'btn-danger' : 'btn-secondary'}`}\r\n                  onClick={handleVoiceRecording}\r\n                >\r\n                  {isRecording ? '🛑 Stop Recording' : '🎤 Start Recording'}\r\n                </button>\r\n                                 {isRecording && (\r\n                   <div className=\"recording-indicator\">\r\n                     <span className=\"recording-dot\"></span>\r\n                     Recording... Speak clearly in {voiceLanguage === 'hi-IN' ? 'Hindi' : \r\n                       voiceLanguage === 'en-IN' || voiceLanguage === 'en-US' ? 'English' :\r\n                       voiceLanguage === 'gu-IN' ? 'Gujarati' :\r\n                       voiceLanguage === 'bn-IN' ? 'Bengali' :\r\n                       voiceLanguage === 'ta-IN' ? 'Tamil' :\r\n                       voiceLanguage === 'te-IN' ? 'Telugu' :\r\n                       voiceLanguage === 'mr-IN' ? 'Marathi' :\r\n                       voiceLanguage === 'pa-IN' ? 'Punjabi' :\r\n                       voiceLanguage === 'kn-IN' ? 'Kannada' :\r\n                       voiceLanguage === 'hi-IN-haryanvi' ? 'Haryanvi' : 'Hindi'}\r\n                   </div>\r\n                 )}\r\n                {voiceInput && (\r\n                  <div className=\"voice-transcription\">\r\n                    <div className=\"transcription-header\">\r\n                      <strong>Transcribed:</strong>\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"clear-transcription-btn\"\r\n                        onClick={() => {\r\n                          setVoiceInput('');\r\n                          setFormData(prev => ({\r\n                            ...prev,\r\n                            issueDescription: prev.issueDescription.replace(voiceInput, '').trim()\r\n                          }));\r\n                        }}\r\n                      >\r\n                        ✕ Clear\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"transcription-text\">{voiceInput}</div>\r\n                  </div>\r\n                )}\r\n                                 <div className=\"voice-instructions\">\r\n                   <small>💡 Tip: Speak clearly in your selected language for better recognition</small>\r\n                   <br />\r\n                   <small>🌐 Browser Support: {isSpeechRecognitionSupported() ? '✅ Supported' : '❌ Not Supported'} - Chrome, Edge, Safari (HTTPS required)</small>\r\n                 </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Image Upload */}\r\n            <div className=\"image-upload-section\">\r\n              <label className=\"form-label\">Upload Images</label>\r\n              <div className=\"image-upload-controls\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-secondary\"\r\n                  onClick={() => fileInputRef.current.click()}\r\n                >\r\n                  📷 Upload Images\r\n                </button>\r\n                <input\r\n                  ref={fileInputRef}\r\n                  type=\"file\"\r\n                  multiple\r\n                  accept=\"image/*\"\r\n                  onChange={handleImageUpload}\r\n                  style={{ display: 'none' }}\r\n                />\r\n              </div>\r\n              \r\n              {selectedImages.length > 0 && (\r\n                <div className=\"image-preview-grid\">\r\n                  {selectedImages.map((image, index) => (\r\n                    <div key={index} className=\"image-preview-card\">\r\n                      <img \r\n                        src={image.preview} \r\n                        alt={`Upload ${index + 1}`}\r\n                        className=\"image-preview\"\r\n                      />\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"remove-image-btn\"\r\n                        onClick={() => removeImage(index)}\r\n                      >\r\n                        ✕\r\n                      </button>\r\n                      {image.analysis && (\r\n                        <div className=\"image-analysis\">\r\n                          <strong>AI Analysis:</strong> {image.analysis.description}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Category and Region */}\r\n          <div className=\"form-section\">\r\n            <h3 className=\"section-title\">Additional Details</h3>\r\n            <div className=\"details-grid\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"category\" className=\"form-label\">Issue Category</label>\r\n                <select\r\n                  id=\"category\"\r\n                  name=\"category\"\r\n                  value={formData.category}\r\n                  onChange={handleInputChange}\r\n                  className=\"form-select\"\r\n                  required\r\n                >\r\n                  <option value=\"\">Select category</option>\r\n                  {categories.map(category => (\r\n                    <option key={category} value={category}>{category}</option>\r\n                  ))}\r\n                </select>\r\n                {formData.category === 'Other' && (\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"categoryOther\"\r\n                    value={formData.categoryOther}\r\n                    onChange={handleInputChange}\r\n                    className=\"form-input\"\r\n                    placeholder=\"Please specify the issue category\"\r\n                    required\r\n                    style={{ marginTop: '0.5rem' }}\r\n                  />\r\n                )}\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"region\" className=\"form-label\">State/Region</label>\r\n                <select\r\n                  id=\"region\"\r\n                  name=\"region\"\r\n                  value={formData.region}\r\n                  onChange={handleInputChange}\r\n                  className=\"form-select\"\r\n                  required\r\n                >\r\n                  <option value=\"\">Select state</option>\r\n                  {regions.map(region => (\r\n                    <option key={region} value={region}>{region}</option>\r\n                  ))}\r\n                </select>\r\n                {formData.region === 'Other' && (\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"regionOther\"\r\n                    value={formData.regionOther}\r\n                    onChange={handleInputChange}\r\n                    className=\"form-input\"\r\n                    placeholder=\"Please specify your state/region\"\r\n                    required\r\n                    style={{ marginTop: '0.5rem' }}\r\n                  />\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* AI Draft Generation */}\r\n          <div className=\"form-section\">\r\n            <h3 className=\"section-title\">AI-Powered Draft</h3>\r\n            <button\r\n              type=\"button\"\r\n              className={`btn btn-primary ${isGeneratingDraft ? 'loading' : ''}`}\r\n              onClick={generateDraft}\r\n              disabled={isGeneratingDraft || !formData.category || !formData.issueDescription}\r\n            >\r\n              {isGeneratingDraft ? 'Generating Draft...' : 'Generate AI Draft'}\r\n            </button>\r\n\r\n            {aiDraft && (\r\n              <div className=\"ai-draft-section\">\r\n                <div className=\"draft-header\">\r\n                  <h4>Generated Complaint Draft:</h4>\r\n                  <div className=\"draft-actions\">\r\n                    {!isEditingDraft ? (\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-secondary\"\r\n                        onClick={handleEditDraft}\r\n                      >\r\n                        ✏️ Edit Draft\r\n                      </button>\r\n                    ) : (\r\n                      <div className=\"edit-actions\">\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-success\"\r\n                          onClick={handleSaveDraft}\r\n                        >\r\n                          💾 Save Changes\r\n                        </button>\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-secondary\"\r\n                          onClick={handleCancelEdit}\r\n                        >\r\n                          ❌ Cancel\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {!isEditingDraft ? (\r\n                  <div className=\"draft-preview\">\r\n                    <pre className=\"draft-content\">{aiDraft.draft}</pre>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"draft-edit\">\r\n                    <div className=\"form-group\">\r\n                      <label htmlFor=\"editedDraft\" className=\"form-label\">Edit Complaint Draft:</label>\r\n                      <textarea\r\n                        id=\"editedDraft\"\r\n                        value={editedDraft}\r\n                        onChange={(e) => setEditedDraft(e.target.value)}\r\n                        className=\"form-input\"\r\n                        rows=\"8\"\r\n                        placeholder=\"Edit the complaint draft...\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"authority-info\">\r\n                  <h4>Concerned Authority:</h4>\r\n                  <p><strong>Name:</strong> {aiDraft.authority.name}</p>\r\n                  {!isEditingDraft ? (\r\n                    <p><strong>Email:</strong> {aiDraft.authority.email}</p>\r\n                  ) : (\r\n                    <div className=\"form-group\">\r\n                      <label htmlFor=\"editedAuthorityEmail\" className=\"form-label\">Authority Email:</label>\r\n                      <input\r\n                        type=\"email\"\r\n                        id=\"editedAuthorityEmail\"\r\n                        value={editedAuthorityEmail}\r\n                        onChange={(e) => setEditedAuthorityEmail(e.target.value)}\r\n                        className=\"form-input\"\r\n                        placeholder=\"Enter authority email\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n                  <p><strong>Phone:</strong> {aiDraft.authority.phone}</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Review and Submit */}\r\n          <div className=\"form-section\">\r\n            <h3 className=\"section-title\">Review & Submit</h3>\r\n            <div className=\"review-checkbox\">\r\n              <label className=\"checkbox-label\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={reviewConfirmed}\r\n                  onChange={(e) => setReviewConfirmed(e.target.checked)}\r\n                  className=\"checkbox-input\"\r\n                />\r\n                <span className=\"checkbox-text\">\r\n                  I have reviewed the complaint and confirm the details are correct\r\n                </span>\r\n              </label>\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className={`btn btn-success w-full ${isSubmitting ? 'loading' : ''}`}\r\n              disabled={isSubmitting || !reviewConfirmed}\r\n            >\r\n              {isSubmitting ? 'Submitting Complaint...' : 'Submit Complaint'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FileComplaint; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}